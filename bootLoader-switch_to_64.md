# Switch-to-64 切换到64位保护模式
第二阶段我们需要切换到64位模式以执行我们后续的任务

在x64体系中，切换到64位需要两个步骤
- 切换到32位保护模式  

- 切换到IA-32e\[EM64T\]/AMD64   

##切换到32位保护模式
因为在切换到保护模式后，分段机制将会发生变化。所以在进入保护模式前，我们先定义几个GDT表项

- 0x00 系统保留  
- 0x08 DMA-显示器（字符）  
- 0x10 4G寻址的代码段  
- 0x18 4G寻址的数据段  
- 0x20 指向GDT本身的64KB  

设置GDT
打开A20地址线
禁止中断
设置CR0.PE = 1